<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Scatter Test</title>
  <script src="https://www.gstatic.com/charts/loader.js"></script>

  <script>
    google.charts.load('current', { packages: ['corechart'] });
    google.charts.setOnLoadCallback(draw);

    async function draw() {
      const csvUrl =
        'https://docs.google.com/spreadsheets/d/e/2PACX-1vSHkysTN6roFag5cFJv97rmXIsO9vKLKaAXmJxbeAD0v4klws329T8nwBI1ftUFKvrukkvLYM9vPysK/pub?gid=1283363545&single=true&output=csv';

      const res = await fetch(csvUrl);
      const csv = await res.text();

      const rows = csv.trim().split('\n').slice(1);

      const data = new google.visualization.DataTable();
      data.addColumn('number', 'Measured + Indicated');
      data.addColumn('number', 'P+P / M+I');

      rows.forEach(r => {
        const c = r.split(',').map(v => v.replace(/"/g, '').trim());
        const x = parseFloat(c[1]);
        const y = parseFloat(c[2]);
        if (!isNaN(x) && !isNaN(y)) {
          data.addRow([x, y]);
        }
      });

      const options = {
        title: 'Scatter Test',
        hAxis: { minValue: 0, maxValue: 1 },
        vAxis: { minValue: 0, maxValue: 1 },
        pointSize: 7,
        legend: 'none'
      };

      const chart = new google.visualization.ScatterChart(
        document.getElementById('chart')
      );
      chart.draw(data, options);
    }
  </script>
</head>

<body>
  <div id="chart"></div>
</body>
</html>


